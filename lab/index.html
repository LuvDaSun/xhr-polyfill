<!DOCTYPE html>

<html>
<head>
<title></title>
<script type="text/javascript" src="XMLHttpRequestProxy.js"></script>
<script type="text/javascript">

registerChannel('//local-alt.ebu.bz:8080/channel.html');

// if(document.documentMode && document.documentMode < 10) {
// 	XMLHttpRequest = XMLHttpRequestProxy;
// }


window.runTest = function(){

	var xhr = new XMLHttpRequestProxy();
	xhr.open('GET', '//local-alt.ebu.bz:8080/data.json', true);
	xhr.onreadystatechange = function() {
		if (xhr.readyState === 4){
			document.getElementById('responseText').innerHTML = [
				xhr.responseText
				, xhr.getResponseHeader('content-type')
				, xhr.getResponseHeader('Access-Control-Allow-Origin')
				, xhr.getResponseHeader('Cache-control')
				, xhr.getResponseHeader('X-Powered-By')
			].join('<br />');
		}
	};
	xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
	xhr.send(null); 
}


</script>
</head>

<body onload="runTest()">
	<p id="responseText">
	</p>
</body>
</html>